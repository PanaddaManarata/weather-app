<!doctype html>
<html lang="en">
  <head>
    <title>Weather app</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>
  <body>
      <div class="container-fluid">

            <h1>Weather for your purrfect vacayy</h1>
            <div class="searchCity">
                <input type="text" placeholder="Enter City Name" id="search-text">
                <button>search</button>
            </div>
            
            <div class="row">
    <div class="col-sm-12 col-md-2">
        <h3 id="frstBox"></h3>
        <div class="city-icon">
                    <div class="city-icon-holder">
                        <div id="frstTemp" class="temp"></div>
                        <img src="" alt="" id="icon1">
                      </div>
                    </div>
    </div>
    <div class="col-sm-12 col-md-2">
        <h3 id="scndBox">Tuesday</h3>
        <div class="city-icon">
                    <div class="city-icon-holder">
                        <div id="scndTemp" class="temp"></div>
                        <img src="" alt="" id="icon2">
                      </div>
                    </div>
    </div>
    <div class="col-sm-12 col-md-2">
        <h3 id="thrdBox">Wednesday</h3>
        <div class="city-icon">
                    <div class="city-icon-holder">
                        <div id="thrdTemp" class="temp"></div>
                        <img src="" alt="" id="icon3">
                      </div>
                    </div>
    </div>
    <div class="col-sm-12 col-md-2">
        <h3 id="frthBox">Thursday</h3>
        <div class="city-icon">
                    <div class="city-icon-holder">
                        <div id="frthTemp" class="temp"></div>
                        <img src="" alt="" id="icon4">
                      </div>
                    </div>
    </div>
    <div class="col-sm-12 col-md-2">
        <h3 id="ffthBox">Friyayy</h3>
        <div class="city-icon">
                    <div class="city-icon-holder">
                        <div id="ffthTemp" class="temp"></div>
                        <img src="" alt="" id="icon5">
                      </div>
                    </div>
    </div>
    
    

</div>


      </div>
    

<script>
const appKey = "8f7a4e4ad9e7a024000e925002818d71"; 
const button = document.querySelector('button'); 
const input = document.getElementById('search-text');




let d = new Date(); 
let day = d.getDay(); 

let days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
let firstBox = document.getElementById('frstBox');
let secondBox = document.getElementById('scndBox'); 
let thirdBox = document.getElementById('thrdBox'); 
let fourthBox = document.getElementById('frthBox'); 
let fifthBox = document.getElementById('ffthBox');
//headerBox.innerHTML= 

firstBox.innerHTML= days[day]; 
secondBox.innerHTML= days[day+1]
thirdBox.innerHTML= days[day+2]
fourthBox.innerHTML= days[day+3]
fifthBox.innerHTML= days[day]

console.log(days); 




//get weather info from ipa (library) and put in variable

    function getWeather(){
    button.addEventListener("click", async function(e){
    console.log('logged getWeather')
    let city = input.value; 
    let api = `http://api.openweathermap.org/data/2.5/forecast/?q=${city}&units=metric&APPID=${appKey}&unit=metrics`
    //"https://api.openweathermap.org/data/2.5/weather?q=" + input.value + "&units=metric&appid=" +appKey; 
    console.log(api); 
    let response = await axios.get(api); 
    console.log(response)
//
    let firstTemp = document.getElementById('frstTemp'); 
    let secondTemp = document.getElementById('scndTemp');
    let thirdTemp = document.getElementById('thrdTemp');
    let fourthTemp = document.getElementById('frthTemp');
    let fifthTemp = document.getElementById('ffthTemp');
    console.log(firstTemp)
    //console.log(respone.data)
    //console.log(response.data.list[0].dt_txt);
    //get current day


    firstTemp.innerHTML =  response.data.list[0].main.temp + '°'; 
    secondTemp.innerHTML = response.data.list[8].main.temp + '°'; 
    thirdTemp.innerHTML = response.data.list[16].main.temp + '°'; 
    fourthTemp.innerHTML = response.data.list[24].main.temp + '°'; 
    fifthTemp.innerHTML = response.data.list[32].main.temp + '°'; 

    function getIcon(){
      console.log("icon ")
      console.log(); 
      let iconPlace1 = document.getElementById('icon1'); 
      let iconPlace2 = document.getElementById('icon2');
      let iconPlace3 = document.getElementById('icon3');
      let iconPlace4 = document.getElementById('icon4');
      let iconPlace5 = document.getElementById('icon5');
    
      let icon1 = response.data.list[0].weather[0].icon; 
      let icon2 = response.data.list[8].weather[0].icon; 
      let icon3 = response.data.list[16].weather[0].icon; 
      let icon4 = response.data.list[24].weather[0].icon; 
      let icon5 = response.data.list[32].weather[0].icon; 


      iconPlace1.src = "http://openweathermap.org/img/wn/" + icon1 + "@2x.png"
      iconPlace2.src = `http://openweathermap.org/img/wn/${icon2}@2x.png`; 
      iconPlace3.src = `http://openweathermap.org/img/wn/${icon3}@2x.png`; 
      iconPlace4.src = `http://openweathermap.org/img/wn/${icon4}@2x.png`; 
      iconPlace5.src = `http://openweathermap.org/img/wn/${icon5}@2x.png`; 
      console.log("icon change!!")
    }
    
    getIcon();
    

    })

    
    }

getWeather()   

function getBackground(){
//  console.log("this is the function for bg")

    button.addEventListener("click", async function(e){
    console.log('logged getBackground')
    let city = input.value
    let apiBg = `https://api.unsplash.com/search/photos?client_id=c33d91e9935e3e5c864b2085bb5f3b5dde903f614df8ccc7c2bb9720d43b1a38&page=1&query=${city}`; 
    
    let responseBg = await axios.get(apiBg); 
// console.log(responseBg.data.results[2].urls.full)
    let background = responseBg.data.results[Math.floor(Math.random() * 10)].urls.full 
    console.log(background); 

    document.body.style.backgroundImage = `url('${background}')`;

    

    })
    
    }

getBackground()



input.addEventListener('keyup',  function(){
    if (event.key === "Enter") {
         getWeather(); 
         getBackground(); 
        console.log("key")
    }
})




</script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>

</html> 